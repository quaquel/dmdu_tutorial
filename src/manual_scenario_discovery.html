
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="./css/styling.css">
    <link rel="stylesheet" type="text/css" href="./css/d3.parcoords.css">
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>
    <script src="./js/d3.js"></script>
    <script src="./js/d3.svg.multibrush.js"></script>
    <script src="./js/sylvester.js"></script>
    <script src="./js/underscore.js"></script>
    <script src="./js/slickgrid/jquery-1.7.min.js"></script>
    <script src="./js/underscore.js"></script>
    <script src="./js/underscore.math.js"></script>
    <script src="./js/d3.parcoords.js"></script>
    <script src="./js/d3-beeswarm.js"></script>
    <script src="http://d3js.org/queue.v1.min.js"></script>
    <script src="./js/canvas2svg.js"></script>
    <script src="./js/FileSaver.js"></script>
    <script src="./js/vkbeautify.0.99.00.beta.js"></script>
    <script src="./js/science.v1.js"></script>
</head>
<body>
    <div class="container">
        <div id="row1" class="row">
            <div class="col-xl-2">
            </div>
            <div id="input" class="col-xl-10">
            </div>
        </div>
        <div id="row2" class="row">
            <div class="col-lg-2 col-xl-2">
            </div>
            <div class="col-lg-10 col-xl-10">
                <div id="example" class="parcoords"></div>
            </div>
        </div>
        <div id="row3" class="row">
            <!--should perhaps be generated by javascript, so we can properly manage checked state-->
            <!--alternatively only create the event handlers in javascript, and then also ensure unchecked-->
            <!--http://www.w3schools.com/jquery/jquery_hide_show.asp we want to only show row once we select-->
            <!--in the outcome space, we also want to hide again if selection is disabled-->
            <div class="col-lg-2 col-xl-2">
            </div>
                <div id='row3checkboxes' class="col-lg-10 col-xl-10">
                </div>
            </div>
        </div>
    </div>
<script>
let pc0;
let figs = new Array();
let legendLabels = new Array(); //the labels in the selection row
const labels = ["selected and of interest", "selected and not of interest",
    "not selected but of interest", "not selected and not of interest" ];

// TODO:: can we make the outcome specific brushes both
// TODO:: globol and dynamic?
let parcoord_brushed = new Set(); // set of brushed items in parcoords
let figs_brushed = new Array();
let allKeys;

const data = [{"key": "0", "experiment": {"additional seasonal immune population fraction R1": 0.0596924039205286, "fatality ratio region 1": 0.0911533691132363, "infection ratio region 1": 0.1062260960740208, "initial immune fraction of the population of region 1": 0.1602078311296775, "normal contact rate region 1": 16.99660808941521, "permanent immune population fraction R1": 0.1039758145013601, "recovery time region 1": 0.2968905003174961, "root contact rate region 1": 2.478282611683887, "susceptible to immune population delay time region 1": 0.6784886977645479}, "outcomes": {"deceased population region 1": 349486.28, "max infected fraction R1": 0.00087807147}}, {"key": "1", "experiment": {"additional seasonal immune population fraction R1": 0.2525746915507194, "fatality ratio region 1": 0.0375684677460013, "infection ratio region 1": 0.0010004707969596, "initial immune fraction of the population of region 1": 0.1895772546334055, "normal contact rate region 1": 43.31684488363504, "permanent immune population fraction R1": 0.418437545544399, "recovery time region 1": 0.3893900866719387, "root contact rate region 1": 3.1472929404056056, "susceptible to immune population delay time region 1": 0.6061167257123998}, "outcomes": {"deceased population region 1": 328.79236, "max infected fraction R1": 2.7599224e-06}}, {"key": "2", "experiment": {"additional seasonal immune population fraction R1": 0.1923873469882931, "fatality ratio region 1": 0.0069214432138188, "infection ratio region 1": 0.0744591895171292, "initial immune fraction of the population of region 1": 0.1018448610571615, "normal contact rate region 1": 46.01422939685664, "permanent immune population fraction R1": 0.2369028892378287, "recovery time region 1": 0.2651021761592247, "root contact rate region 1": 4.358375834361745, "susceptible to immune population delay time region 1": 0.6218438888706433}, "outcomes": {"deceased population region 1": 13654.838, "max infected fraction R1": 0.00039976614}}, {"key": "3", "experiment": {"additional seasonal immune population fraction R1": 0.0886228765954527, "fatality ratio region 1": 0.0309850174104311, "infection ratio region 1": 0.0929509188640724, "initial immune fraction of the population of region 1": 0.0648310002426602, "normal contact rate region 1": 23.96502178322149, "permanent immune population fraction R1": 0.113491779205522, "recovery time region 1": 0.3710090337899212, "root contact rate region 1": 1.627081896138431, "susceptible to immune population delay time region 1": 1.2406594105430466}, "outcomes": {"deceased population region 1": 169404.56, "max infected fraction R1": 0.0011859488}}, {"key": "4", "experiment": {"additional seasonal immune population fraction R1": 0.1202772902684997, "fatality ratio region 1": 0.0021342515405686, "infection ratio region 1": 0.0832132062287239, "initial immune fraction of the population of region 1": 0.3084495892676702, "normal contact rate region 1": 73.60838661754987, "permanent immune population fraction R1": 0.310448696180002, "recovery time region 1": 0.7080487074971508, "root contact rate region 1": 0.3343758002079577, "susceptible to immune population delay time region 1": 1.0890954581783232}, "outcomes": {"deceased population region 1": 720995.1, "max infected fraction R1": 0.13696027}}, {"key": "5", "experiment": {"additional seasonal immune population fraction R1": 0.2902488284325012, "fatality ratio region 1": 0.0325600720540639, "infection ratio region 1": 0.0494723559344777, "initial immune fraction of the population of region 1": 0.294301255505677, "normal contact rate region 1": 14.156497326057556, "permanent immune population fraction R1": 0.3092635448972569, "recovery time region 1": 0.45865531827574, "root contact rate region 1": 0.0170062366711878, "susceptible to immune population delay time region 1": 1.1403013551759833}, "outcomes": {"deceased population region 1": 20884.209, "max infected fraction R1": 0.00022400668}}, {"key": "6", "experiment": {"additional seasonal immune population fraction R1": 0.1892693235967042, "fatality ratio region 1": 0.0020828859738353, "infection ratio region 1": 0.0193641292549441, "initial immune fraction of the population of region 1": 0.1763013753823812, "normal contact rate region 1": 82.18078060655812, "permanent immune population fraction R1": 0.029241022705412, "recovery time region 1": 0.7305074336865965, "root contact rate region 1": 3.933805320727819, "susceptible to immune population delay time region 1": 0.682278807124021}, "outcomes": {"deceased population region 1": 6960.016, "max infected fraction R1": 0.00040615068}}, {"key": "7", "experiment": {"additional seasonal immune population fraction R1": 0.3835909243170789, "fatality ratio region 1": 0.0242205365997055, "infection ratio region 1": 0.0123053282691762, "initial immune fraction of the population of region 1": 0.3754226268282122, "normal contact rate region 1": 80.09771612382428, "permanent immune population fraction R1": 0.0514994495614783, "recovery time region 1": 0.1453959589718017, "root contact rate region 1": 3.770529134440031, "susceptible to immune population delay time region 1": 1.817591167033506}, "outcomes": {"deceased population region 1": 5278.4434, "max infected fraction R1": 2.922281e-05}}, {"key": "8", "experiment": {"additional seasonal immune population fraction R1": 0.035812895276583, "fatality ratio region 1": 0.0220904048763214, "infection ratio region 1": 0.0954576472448403, "initial immune fraction of the population of region 1": 0.3886272934781255, "normal contact rate region 1": 72.13153024749468, "permanent immune population fraction R1": 0.0592959646636602, "recovery time region 1": 0.4645855043305102, "root contact rate region 1": 1.1294323044877477, "susceptible to immune population delay time region 1": 1.4249156204949864}, "outcomes": {"deceased population region 1": 10644989.0, "max infected fraction R1": 0.19807784}}, {"key": "9", "experiment": {"additional seasonal immune population fraction R1": 0.2562549453282052, "fatality ratio region 1": 0.0608837140505476, "infection ratio region 1": 0.0854953452748765, "initial immune fraction of the population of region 1": 0.4539256168721629, "normal contact rate region 1": 92.0842589131012, "permanent immune population fraction R1": 0.2050537456784616, "recovery time region 1": 0.5691884435747135, "root contact rate region 1": 2.900169001917271, "susceptible to immune population delay time region 1": 1.7195487900541868}, "outcomes": {"deceased population region 1": 20499124.0, "max infected fraction R1": 0.059959933}}, {"key": "10", "experiment": {"additional seasonal immune population fraction R1": 0.1654380176722504, "fatality ratio region 1": 0.0209196573355647, "infection ratio region 1": 0.0226751196056886, "initial immune fraction of the population of region 1": 0.1376764314066822, "normal contact rate region 1": 32.0303942092257, "permanent immune population fraction R1": 0.0710102955949777, "recovery time region 1": 0.2312118717967051, "root contact rate region 1": 0.4164196906576157, "susceptible to immune population delay time region 1": 0.954323277800471}, "outcomes": {"deceased population region 1": 10575.562, "max infected fraction R1": 0.000100781486}}, {"key": "11", "experiment": {"additional seasonal immune population fraction R1": 0.1339457324274564, "fatality ratio region 1": 0.0899670441855441, "infection ratio region 1": 0.1422522061127839, "initial immune fraction of the population of region 1": 0.2662830360048087, "normal contact rate region 1": 71.76316337013643, "permanent immune population fraction R1": 0.496233555500481, "recovery time region 1": 0.2758472573478667, "root contact rate region 1": 1.844965406691481, "susceptible to immune population delay time region 1": 0.6568442505060457}, "outcomes": {"deceased population region 1": 9856045.0, "max infected fraction R1": 0.009342958}}, {"key": "12", "experiment": {"additional seasonal immune population fraction R1": 0.3523655152008342, "fatality ratio region 1": 0.0716061071585166, "infection ratio region 1": 0.0574935899872915, "initial immune fraction of the population of region 1": 0.15729047367881, "normal contact rate region 1": 88.96959096004343, "permanent immune population fraction R1": 0.224438349408331, "recovery time region 1": 0.676983526090627, "root contact rate region 1": 4.579582522720914, "susceptible to immune population delay time region 1": 1.6458253261630944}, "outcomes": {"deceased population region 1": 12773923.0, "max infected fraction R1": 0.03114901}}, {"key": "13", "experiment": {"additional seasonal immune population fraction R1": 0.3565051563396479, "fatality ratio region 1": 0.0904820877245625, "infection ratio region 1": 0.0250817233882608, "initial immune fraction of the population of region 1": 0.3958412681780865, "normal contact rate region 1": 29.37695904968744, "permanent immune population fraction R1": 0.3044437193216426, "recovery time region 1": 0.6045541037103648, "root contact rate region 1": 1.509099557881212, "susceptible to immune population delay time region 1": 1.2348233136879427}, "outcomes": {"deceased population region 1": 27572.22, "max infected fraction R1": 0.00012775326}}, {"key": "14", "experiment": {"additional seasonal immune population fraction R1": 0.3164997984000318, "fatality ratio region 1": 0.0457000140814927, "infection ratio region 1": 0.0376186146815769, "initial immune fraction of the population of region 1": 0.3026497322988992, "normal contact rate region 1": 54.03340708997448, "permanent immune population fraction R1": 0.427255917972814, "recovery time region 1": 0.748842203582692, "root contact rate region 1": 3.340793631859281, "susceptible to immune population delay time region 1": 1.9871190295661236}, "outcomes": {"deceased population region 1": 30167.377, "max infected fraction R1": 0.00025717562}}, {"key": "15", "experiment": {"additional seasonal immune population fraction R1": 0.1430709201526492, "fatality ratio region 1": 0.0490408296053186, "infection ratio region 1": 0.0412636988422788, "initial immune fraction of the population of region 1": 0.0138298192156209, "normal contact rate region 1": 44.592603257397045, "permanent immune population fraction R1": 0.4407323919248224, "recovery time region 1": 0.396756746692718, "root contact rate region 1": 4.474429171002166, "susceptible to immune population delay time region 1": 1.677989769343191}, "outcomes": {"deceased population region 1": 33107.637, "max infected fraction R1": 0.0002017711}}, {"key": "16", "experiment": {"additional seasonal immune population fraction R1": 0.297092795277563, "fatality ratio region 1": 0.019884000929864, "infection ratio region 1": 0.0497373693982949, "initial immune fraction of the population of region 1": 0.2574864807565931, "normal contact rate region 1": 63.82644264550337, "permanent immune population fraction R1": 0.4935132573278585, "recovery time region 1": 0.3848104460926805, "root contact rate region 1": 1.5994956917402263, "susceptible to immune population delay time region 1": 1.0700549561489996}, "outcomes": {"deceased population region 1": 9188.843, "max infected fraction R1": 0.00013660983}}, {"key": "17", "experiment": {"additional seasonal immune population fraction R1": 0.0039413794966128, "fatality ratio region 1": 0.0686108020655357, "infection ratio region 1": 0.0884761874870765, "initial immune fraction of the population of region 1": 0.2230094758577092, "normal contact rate region 1": 88.29216844928145, "permanent immune population fraction R1": 0.1818208378998091, "recovery time region 1": 0.3313054596536585, "root contact rate region 1": 4.107264002505779, "susceptible to immune population delay time region 1": 0.551303264066833}, "outcomes": {"deceased population region 1": 17105150.0, "max infected fraction R1": 0.02702793}}, {"key": "18", "experiment": {"additional seasonal immune population fraction R1": 0.4690034307331222, "fatality ratio region 1": 0.0766594261532197, "infection ratio region 1": 0.0774046265822633, "initial immune fraction of the population of region 1": 0.3449247594302184, "normal contact rate region 1": 55.38409229304521, "permanent immune population fraction R1": 0.0122216882266573, "recovery time region 1": 0.3146243083598067, "root contact rate region 1": 4.200967600926783, "susceptible to immune population delay time region 1": 1.4736847521686187}, "outcomes": {"deceased population region 1": 401855.88, "max infected fraction R1": 0.00073008623}}, {"key": "19", "experiment": {"additional seasonal immune population fraction R1": 0.4152283671418753, "fatality ratio region 1": 0.0233271409932211, "infection ratio region 1": 0.031171621095, "initial immune fraction of the population of region 1": 0.0069060818102667, "normal contact rate region 1": 35.49989809941843, "permanent immune population fraction R1": 0.3752468230674099, "recovery time region 1": 0.6133853681006745, "root contact rate region 1": 4.835411975892034, "susceptible to immune population delay time region 1": 1.477414929985558}, "outcomes": {"deceased population region 1": 6872.299, "max infected fraction R1": 0.00012787111}}, {"key": "20", "experiment": {"additional seasonal immune population fraction R1": 0.1038105890714897, "fatality ratio region 1": 0.0148397638215583, "infection ratio region 1": 0.0045156474503174, "initial immune fraction of the population of region 1": 0.2885627220514381, "normal contact rate region 1": 21.02468970859009, "permanent immune population fraction R1": 0.0244831832392004, "recovery time region 1": 0.2603448968237077, "root contact rate region 1": 3.5346776120778336, "susceptible to immune population delay time region 1": 1.1695380089182508}, "outcomes": {"deceased population region 1": 1521.2944, "max infected fraction R1": 2.480941e-05}}, {"key": "21", "experiment": {"additional seasonal immune population fraction R1": 0.3257102054983851, "fatality ratio region 1": 0.0997695688331694, "infection ratio region 1": 0.1069451535683051, "initial immune fraction of the population of region 1": 0.4220352034546465, "normal contact rate region 1": 62.86705854300608, "permanent immune population fraction R1": 0.4593862282198132, "recovery time region 1": 0.4186247581226042, "root contact rate region 1": 2.8023254803654902, "susceptible to immune population delay time region 1": 1.8906750381736988}, "outcomes": {"deceased population region 1": 1692403.9, "max infected fraction R1": 0.0015103909}}, {"key": "22", "experiment": {"additional seasonal immune population fraction R1": 0.174119847358049, "fatality ratio region 1": 0.0122893502860282, "infection ratio region 1": 0.0643109010126253, "initial immune fraction of the population of region 1": 0.2047501387349515, "normal contact rate region 1": 48.036280524779805, "permanent immune population fraction R1": 0.3864924114361756, "recovery time region 1": 0.4274396933923912, "root contact rate region 1": 4.074318045036043, "susceptible to immune population delay time region 1": 1.5822639586018965}, "outcomes": {"deceased population region 1": 20982.24, "max infected fraction R1": 0.00045733587}}, {"key": "23", "experiment": {"additional seasonal immune population fraction R1": 0.3984984124171686, "fatality ratio region 1": 0.0476849851889859, "infection ratio region 1": 0.1473448076748682, "initial immune fraction of the population of region 1": 0.2112397405600319, "normal contact rate region 1": 84.6295148467965, "permanent immune population fraction R1": 0.4319657260419591, "recovery time region 1": 0.2436049992817983, "root contact rate region 1": 3.9571608957680535, "susceptible to immune population delay time region 1": 1.6347854585322923}, "outcomes": {"deceased population region 1": 1163287.0, "max infected fraction R1": 0.0027362625}}, {"key": "24", "experiment": {"additional seasonal immune population fraction R1": 0.029091701300169, "fatality ratio region 1": 0.0103395499098641, "infection ratio region 1": 0.1397084248525407, "initial immune fraction of the population of region 1": 0.369860086611763, "normal contact rate region 1": 99.82071761586062, "permanent immune population fraction R1": 0.0847234654172485, "recovery time region 1": 0.5132181062950093, "root contact rate region 1": 0.5487943753804844, "susceptible to immune population delay time region 1": 1.7960275034723925}, "outcomes": {"deceased population region 1": 5390499.0, "max infected fraction R1": 0.4224773}}, {"key": "25", "experiment": {"additional seasonal immune population fraction R1": 0.1123438606138479, "fatality ratio region 1": 0.0394140519615442, "infection ratio region 1": 0.0142935218430151, "initial immune fraction of the population of region 1": 0.0812068050109828, "normal contact rate region 1": 36.64943302110578, "permanent immune population fraction R1": 0.3701943556588922, "recovery time region 1": 0.7218543643857886, "root contact rate region 1": 4.60651094467338, "susceptible to immune population delay time region 1": 0.7006344991510876}, "outcomes": {"deceased population region 1": 8892.54, "max infected fraction R1": 0.00010358317}}, {"key": "26", "experiment": {"additional seasonal immune population fraction R1": 0.0176367602144042, "fatality ratio region 1": 0.0362322921755449, "infection ratio region 1": 0.0216510057118468, "initial immune fraction of the population of region 1": 0.2285533906448247, "normal contact rate region 1": 48.84770690195349, "permanent immune population fraction R1": 0.1857702951384867, "recovery time region 1": 0.1544412682770486, "root contact rate region 1": 1.4178258036148152, "susceptible to immune population delay time region 1": 1.6649084886821237}, "outcomes": {"deceased population region 1": 17586.979, "max infected fraction R1": 6.726916e-05}}, {"key": "27", "experiment": {"additional seasonal immune population fraction R1": 0.4891023881074416, "fatality ratio region 1": 0.007437404684851, "infection ratio region 1": 0.0520741490119435, "initial immune fraction of the population of region 1": 0.3143622667128103, "normal contact rate region 1": 75.8737468294707, "permanent immune population fraction R1": 0.0422192769254814, "recovery time region 1": 0.4315049450808922, "root contact rate region 1": 2.400130454874756, "susceptible to immune population delay time region 1": 1.3972037442182104}, "outcomes": {"deceased population region 1": 718656.8, "max infected fraction R1": 0.014226165}}, {"key": "28", "experiment": {"additional seasonal immune population fraction R1": 0.3425061060634711, "fatality ratio region 1": 0.0633127241981155, "infection ratio region 1": 0.1102777494320907, "initial immune fraction of the population of region 1": 0.4883444664154605, "normal contact rate region 1": 41.84747033459878, "permanent immune population fraction R1": 0.1713363904659078, "recovery time region 1": 0.6478681911267472, "root contact rate region 1": 0.7288339829960224, "susceptible to immune population delay time region 1": 1.984055999524517}, "outcomes": {"deceased population region 1": 22620836.0, "max infected fraction R1": 0.06719753}}, {"key": "29", "experiment": {"additional seasonal immune population fraction R1": 0.4759788945187634, "fatality ratio region 1": 0.0724964505352797, "infection ratio region 1": 0.1154367045630671, "initial immune fraction of the population of region 1": 0.2062667915414196, "normal contact rate region 1": 22.78411683687113, "permanent immune population fraction R1": 0.4515872598675371, "recovery time region 1": 0.3532959830890719, "root contact rate region 1": 4.772410705339766, "susceptible to immune population delay time region 1": 0.8858042937629872}, "outcomes": {"deceased population region 1": 32453.834, "max infected fraction R1": 0.000138043}}, {"key": "30", "experiment": {"additional seasonal immune population fraction R1": 0.288029149666816, "fatality ratio region 1": 0.053976309978508, "infection ratio region 1": 0.0475332320064762, "initial immune fraction of the population of region 1": 0.0435326774054875, "normal contact rate region 1": 38.56113235924431, "permanent immune population fraction R1": 0.1536717803062702, "recovery time region 1": 0.6670672899081301, "root contact rate region 1": 2.036085182235118, "susceptible to immune population delay time region 1": 1.123206014647112}, "outcomes": {"deceased population region 1": 180353.92, "max infected fraction R1": 0.0006479868}}, {"key": "31", "experiment": {"additional seasonal immune population fraction R1": 0.0422953672305597, "fatality ratio region 1": 0.0525934428697954, "infection ratio region 1": 0.1202347085516764, "initial immune fraction of the population of region 1": 0.045209046038428, "normal contact rate region 1": 15.467320381213264, "permanent immune population fraction R1": 0.2585137722448643, "recovery time region 1": 0.3577974277976171, "root contact rate region 1": 0.8491041113784998, "susceptible to immune population delay time region 1": 0.8964497839070006}, "outcomes": {"deceased population region 1": 204335.08, "max infected fraction R1": 0.0009788288}}, {"key": "32", "experiment": {"additional seasonal immune population fraction R1": 0.2777785207819006, "fatality ratio region 1": 0.0280938220168351, "infection ratio region 1": 0.0974247516630312, "initial immune fraction of the population of region 1": 0.1168381033255372, "normal contact rate region 1": 51.18252874017141, "permanent immune population fraction R1": 0.4478967640205556, "recovery time region 1": 0.252548820759167, "root contact rate region 1": 2.580759472471445, "susceptible to immune population delay time region 1": 0.5759354356212666}, "outcomes": {"deceased population region 1": 31679.637, "max infected fraction R1": 0.00023051683}}, {"key": "33", "experiment": {"additional seasonal immune population fraction R1": 0.4045058930920832, "fatality ratio region 1": 0.0790131529674718, "infection ratio region 1": 0.0019515451428286, "initial immune fraction of the population of region 1": 0.0587241980247337, "normal contact rate region 1": 26.301847085534984, "permanent immune population fraction R1": 0.0153398271138186, "recovery time region 1": 0.3265170537619926, "root contact rate region 1": 4.018442425625193, "susceptible to immune population delay time region 1": 0.5728591013209449}, "outcomes": {"deceased population region 1": 2365.0469, "max infected fraction R1": 8.172284e-06}}, {"key": "34", "experiment": {"additional seasonal immune population fraction R1": 0.2824809644673098, "fatality ratio region 1": 0.0503249579772735, "infection ratio region 1": 0.0109948016369046, "initial immune fraction of the population of region 1": 0.2443856692942493, "normal contact rate region 1": 40.77028331088056, "permanent immune population fraction R1": 0.3690383915780929, "recovery time region 1": 0.6270810024642723, "root contact rate region 1": 1.6589949072305643, "susceptible to immune population delay time region 1": 1.8358487490000952}, "outcomes": {"deceased population region 1": 6733.9717, "max infected fraction R1": 5.898001e-05}}, {"key": "35", "experiment": {"additional seasonal immune population fraction R1": 0.0846636101385102, "fatality ratio region 1": 0.0739588819153406, "infection ratio region 1": 0.1226548304687628, "initial immune fraction of the population of region 1": 0.4603066972442318, "normal contact rate region 1": 32.566270652513495, "permanent immune population fraction R1": 0.3180106698887481, "recovery time region 1": 0.4801354981040309, "root contact rate region 1": 0.6430464644335733, "susceptible to immune population delay time region 1": 1.9682622731719075}, "outcomes": {"deceased population region 1": 11179682.0, "max infected fraction R1": 0.014006569}}, {"key": "36", "experiment": {"additional seasonal immune population fraction R1": 0.2451819021474626, "fatality ratio region 1": 0.0008276933682099, "infection ratio region 1": 0.0327908314108178, "initial immune fraction of the population of region 1": 0.0871513736111083, "normal contact rate region 1": 13.07931991965279, "permanent immune population fraction R1": 0.2292487676689733, "recovery time region 1": 0.5674415918893302, "root contact rate region 1": 3.5927320411774866, "susceptible to immune population delay time region 1": 0.7487365244034175}, "outcomes": {"deceased population region 1": 421.3529, "max infected fraction R1": 0.00020513736}}, {"key": "37", "experiment": {"additional seasonal immune population fraction R1": 0.0320264006477357, "fatality ratio region 1": 0.0698352404368032, "infection ratio region 1": 0.0103881547405901, "initial immune fraction of the population of region 1": 0.1951490424531438, "normal contact rate region 1": 51.63453235365696, "permanent immune population fraction R1": 0.2703231002357109, "recovery time region 1": 0.6812950548873634, "root contact rate region 1": 2.9192334547831766, "susceptible to immune population delay time region 1": 1.7453656275458185}, "outcomes": {"deceased population region 1": 16819.072, "max infected fraction R1": 0.00010327624}}, {"key": "38", "experiment": {"additional seasonal immune population fraction R1": 0.3933351407674028, "fatality ratio region 1": 0.0097839681168194, "infection ratio region 1": 0.1278418931029622, "initial immune fraction of the population of region 1": 0.4427541351936876, "normal contact rate region 1": 52.62419215983115, "permanent immune population fraction R1": 0.126628546905564, "recovery time region 1": 0.531149565401116, "root contact rate region 1": 0.7723524033944645, "susceptible to immune population delay time region 1": 0.9742656496362344}, "outcomes": {"deceased population region 1": 3939407.2, "max infected fraction R1": 0.06349653}}, {"key": "39", "experiment": {"additional seasonal immune population fraction R1": 0.1180644125135303, "fatality ratio region 1": 0.0592655583499716, "infection ratio region 1": 0.0067571229630071, "initial immune fraction of the population of region 1": 0.2994361094526117, "normal contact rate region 1": 30.551585178572388, "permanent immune population fraction R1": 0.0012056673765242, "recovery time region 1": 0.6151841131629556, "root contact rate region 1": 0.1323967854995303, "susceptible to immune population delay time region 1": 1.1533366666517757}, "outcomes": {"deceased population region 1": 10271.463, "max infected fraction R1": 7.885869e-05}}, {"key": "40", "experiment": {"additional seasonal immune population fraction R1": 0.425192735414363, "fatality ratio region 1": 0.0610488085754733, "infection ratio region 1": 0.0585553759626143, "initial immune fraction of the population of region 1": 0.4711433376289355, "normal contact rate region 1": 91.34232201671053, "permanent immune population fraction R1": 0.2500698976794169, "recovery time region 1": 0.3652706675339529, "root contact rate region 1": 0.8795799810429016, "susceptible to immune population delay time region 1": 0.7388934337324875}, "outcomes": {"deceased population region 1": 3386905.5, "max infected fraction R1": 0.009598844}}, {"key": "41", "experiment": {"additional seasonal immune population fraction R1": 0.3081182462471121, "fatality ratio region 1": 0.0986333728618647, "infection ratio region 1": 0.1271806211687853, "initial immune fraction of the population of region 1": 0.1800391087333054, "normal contact rate region 1": 80.54406966669698, "permanent immune population fraction R1": 0.2912846041282541, "recovery time region 1": 0.6532997505002848, "root contact rate region 1": 4.707518797125288, "susceptible to immune population delay time region 1": 1.0104732702641115}, "outcomes": {"deceased population region 1": 30681462.0, "max infected fraction R1": 0.039829053}}, {"key": "42", "experiment": {"additional seasonal immune population fraction R1": 0.4479548663336843, "fatality ratio region 1": 0.0491605132547867, "infection ratio region 1": 0.0722221495932726, "initial immune fraction of the population of region 1": 0.030399503218542, "normal contact rate region 1": 65.88230245842715, "permanent immune population fraction R1": 0.3588114643849865, "recovery time region 1": 0.5472466632897092, "root contact rate region 1": 1.7134433425970228, "susceptible to immune population delay time region 1": 0.77577403053913}, "outcomes": {"deceased population region 1": 1983866.9, "max infected fraction R1": 0.0071441177}}, {"key": "43", "experiment": {"additional seasonal immune population fraction R1": 0.2138350577351833, "fatality ratio region 1": 0.040404186606828, "infection ratio region 1": 0.0985283299172345, "initial immune fraction of the population of region 1": 0.3221163948247847, "normal contact rate region 1": 95.3260981303026, "permanent immune population fraction R1": 0.4386481436136396, "recovery time region 1": 0.555727263656059, "root contact rate region 1": 0.2879909852885981, "susceptible to immune population delay time region 1": 0.9931709417475822}, "outcomes": {"deceased population region 1": 10396514.0, "max infected fraction R1": 0.05368991}}, {"key": "44", "experiment": {"additional seasonal immune population fraction R1": 0.0128982464153675, "fatality ratio region 1": 0.0215792037100625, "infection ratio region 1": 0.116150731473061, "initial immune fraction of the population of region 1": 0.2162545203568978, "normal contact rate region 1": 54.26880860851677, "permanent immune population fraction R1": 0.1381085751007146, "recovery time region 1": 0.1029154004230456, "root contact rate region 1": 4.316349110406306, "susceptible to immune population delay time region 1": 1.2742992553719037}, "outcomes": {"deceased population region 1": 97965.17, "max infected fraction R1": 0.000429717}}, {"key": "45", "experiment": {"additional seasonal immune population fraction R1": 0.4119290636788166, "fatality ratio region 1": 0.0753849084568782, "infection ratio region 1": 0.1082595874555018, "initial immune fraction of the population of region 1": 0.1411165495861648, "normal contact rate region 1": 64.99381367526009, "permanent immune population fraction R1": 0.1093394712738594, "recovery time region 1": 0.4844450060797167, "root contact rate region 1": 2.69304257824042, "susceptible to immune population delay time region 1": 0.8644045020648052}, "outcomes": {"deceased population region 1": 27992770.0, "max infected fraction R1": 0.053976994}}, {"key": "46", "experiment": {"additional seasonal immune population fraction R1": 0.2159483019320722, "fatality ratio region 1": 0.0461599977849631, "infection ratio region 1": 0.0625934512044866, "initial immune fraction of the population of region 1": 0.4368807090802464, "normal contact rate region 1": 87.38204104865973, "permanent immune population fraction R1": 0.3922496669956992, "recovery time region 1": 0.5177374526498427, "root contact rate region 1": 0.1756735955693408, "susceptible to immune population delay time region 1": 1.2007415460008182}, "outcomes": {"deceased population region 1": 10081439.0, "max infected fraction R1": 0.04775106}}, {"key": "47", "experiment": {"additional seasonal immune population fraction R1": 0.0481035112381572, "fatality ratio region 1": 0.0551483258894822, "infection ratio region 1": 0.0806894105233969, "initial immune fraction of the population of region 1": 0.4767281789890005, "normal contact rate region 1": 39.12841903249115, "permanent immune population fraction R1": 0.4740464161466387, "recovery time region 1": 0.1140930772141489, "root contact rate region 1": 1.321182560816578, "susceptible to immune population delay time region 1": 1.256230719439542}, "outcomes": {"deceased population region 1": 64360.234, "max infected fraction R1": 0.00012195409}}, {"key": "48", "experiment": {"additional seasonal immune population fraction R1": 0.3491825571583949, "fatality ratio region 1": 0.0268763047012094, "infection ratio region 1": 0.0371210745050377, "initial immune fraction of the population of region 1": 0.4114821008612044, "normal contact rate region 1": 49.86494682102652, "permanent immune population fraction R1": 0.3521696940086283, "recovery time region 1": 0.6430116221059606, "root contact rate region 1": 0.938484807766043, "susceptible to immune population delay time region 1": 1.573057248517841}, "outcomes": {"deceased population region 1": 16884.914, "max infected fraction R1": 0.00023552518}}, {"key": "49", "experiment": {"additional seasonal immune population fraction R1": 0.3604162711817074, "fatality ratio region 1": 0.083103787759674, "infection ratio region 1": 0.1384980430010634, "initial immune fraction of the population of region 1": 0.0532795274774473, "normal contact rate region 1": 89.63098276011658, "permanent immune population fraction R1": 0.4081109297614921, "recovery time region 1": 0.493385144330269, "root contact rate region 1": 2.3234104389068047, "susceptible to immune population delay time region 1": 1.7797885490276932}, "outcomes": {"deceased population region 1": 15264281.0, "max infected fraction R1": 0.07479902}}, {"key": "50", "experiment": {"additional seasonal immune population fraction R1": 0.1575875113252187, "fatality ratio region 1": 0.0314472688990302, "infection ratio region 1": 0.088644340341885, "initial immune fraction of the population of region 1": 0.4480444186326119, "normal contact rate region 1": 33.564831452026326, "permanent immune population fraction R1": 0.2335648522340103, "recovery time region 1": 0.170187642153857, "root contact rate region 1": 1.2779803329533626, "susceptible to immune population delay time region 1": 1.1752901523088666}, "outcomes": {"deceased population region 1": 63721.92, "max infected fraction R1": 0.00030279363}}, {"key": "51", "experiment": {"additional seasonal immune population fraction R1": 0.2063528866251223, "fatality ratio region 1": 0.0585533491689954, "infection ratio region 1": 0.0658501928900083, "initial immune fraction of the population of region 1": 0.0354783202547716, "normal contact rate region 1": 59.85802108612507, "permanent immune population fraction R1": 0.1583434932093788, "recovery time region 1": 0.3049982108743257, "root contact rate region 1": 0.5957037014630239, "susceptible to immune population delay time region 1": 1.3717995226451205}, "outcomes": {"deceased population region 1": 364531.47, "max infected fraction R1": 0.0008613817}}, {"key": "52", "experiment": {"additional seasonal immune population fraction R1": 0.1279634876865815, "fatality ratio region 1": 0.0849844937407447, "infection ratio region 1": 0.0431681301231307, "initial immune fraction of the population of region 1": 0.2722056328077488, "normal contact rate region 1": 97.48452113217184, "permanent immune population fraction R1": 0.2898411053072333, "recovery time region 1": 0.2165520080570165, "root contact rate region 1": 3.3654046621447904, "susceptible to immune population delay time region 1": 1.343642031388954}, "outcomes": {"deceased population region 1": 112268.51, "max infected fraction R1": 0.0002266139}}, {"key": "53", "experiment": {"additional seasonal immune population fraction R1": 0.0915349703065841, "fatality ratio region 1": 0.0814624081664705, "infection ratio region 1": 0.0156238951010304, "initial immune fraction of the population of region 1": 0.1935790343029284, "normal contact rate region 1": 68.69369371408743, "permanent immune population fraction R1": 0.4846106482637246, "recovery time region 1": 0.4010079537356193, "root contact rate region 1": 1.035146371451121, "susceptible to immune population delay time region 1": 1.7363174249736928}, "outcomes": {"deceased population region 1": 17970.236, "max infected fraction R1": 6.8472524e-05}}, {"key": "54", "experiment": {"additional seasonal immune population fraction R1": 0.0075587412213302, "fatality ratio region 1": 0.0947073247614578, "infection ratio region 1": 0.0298533169405437, "initial immune fraction of the population of region 1": 0.3333295332633075, "normal contact rate region 1": 12.291091714538004, "permanent immune population fraction R1": 0.0376532569748549, "recovery time region 1": 0.4719043960151372, "root contact rate region 1": 3.891269064231517, "susceptible to immune population delay time region 1": 0.6023998044840583}, "outcomes": {"deceased population region 1": 86083.66, "max infected fraction R1": 0.00035040814}}, {"key": "55", "experiment": {"additional seasonal immune population fraction R1": 0.4903738143205879, "fatality ratio region 1": 0.0046337194255144, "infection ratio region 1": 0.1370373988214133, "initial immune fraction of the population of region 1": 0.028559739426226, "normal contact rate region 1": 11.064095325713158, "permanent immune population fraction R1": 0.0305635219135378, "recovery time region 1": 0.6620227649378537, "root contact rate region 1": 3.491410724574694, "susceptible to immune population delay time region 1": 1.546448504924809}, "outcomes": {"deceased population region 1": 19408.5, "max infected fraction R1": 0.0014505313}}, {"key": "56", "experiment": {"additional seasonal immune population fraction R1": 0.3139848834143198, "fatality ratio region 1": 0.0647356062640544, "infection ratio region 1": 0.0683221890413534, "initial immune fraction of the population of region 1": 0.35617599216244, "normal contact rate region 1": 40.12187552241248, "permanent immune population fraction R1": 0.0638845150537729, "recovery time region 1": 0.1231484597799762, "root contact rate region 1": 3.6124312964585865, "susceptible to immune population delay time region 1": 1.303107058677325}, "outcomes": {"deceased population region 1": 93730.9, "max infected fraction R1": 0.00016372025}}, {"key": "57", "experiment": {"additional seasonal immune population fraction R1": 0.2691123708447694, "fatality ratio region 1": 0.0882468431615328, "infection ratio region 1": 0.0764571753656829, "initial immune fraction of the population of region 1": 0.2498162574663632, "normal contact rate region 1": 17.81708637829882, "permanent immune population fraction R1": 0.4879904511394067, "recovery time region 1": 0.5918178438248464, "root contact rate region 1": 3.183381153737736, "susceptible to immune population delay time region 1": 1.4352623823959787}, "outcomes": {"deceased population region 1": 66148.3, "max infected fraction R1": 0.00030628618}}, {"key": "58", "experiment": {"additional seasonal immune population fraction R1": 0.2363220319582853, "fatality ratio region 1": 0.0445962554564385, "infection ratio region 1": 0.1490097932376794, "initial immune fraction of the population of region 1": 0.4935461203259989, "normal contact rate region 1": 67.08864069889117, "permanent immune population fraction R1": 0.2436202912014091, "recovery time region 1": 0.3745716107358047, "root contact rate region 1": 1.3622411832495511, "susceptible to immune population delay time region 1": 1.4514107101444538}, "outcomes": {"deceased population region 1": 12734577.0, "max infected fraction R1": 0.073194504}}, {"key": "59", "experiment": {"additional seasonal immune population fraction R1": 0.4953759305307229, "fatality ratio region 1": 0.0153809669355665, "infection ratio region 1": 0.0195221181152417, "initial immune fraction of the population of region 1": 0.3165000564317285, "normal contact rate region 1": 45.34576967431562, "permanent immune population fraction R1": 0.175161327879197, "recovery time region 1": 0.1518030062454708, "root contact rate region 1": 3.705693008496647, "susceptible to immune population delay time region 1": 1.0446259821568984}, "outcomes": {"deceased population region 1": 3196.6934, "max infected fraction R1": 2.9435696e-05}}, {"key": "60", "experiment": {"additional seasonal immune population fraction R1": 0.1981421102589093, "fatality ratio region 1": 0.0040600663050784, "infection ratio region 1": 0.0030028323225237, "initial immune fraction of the population of region 1": 0.2307422332898335, "normal contact rate region 1": 58.190838149491945, "permanent immune population fraction R1": 0.2628833001973131, "recovery time region 1": 0.2237950010605036, "root contact rate region 1": 2.705019752228137, "susceptible to immune population delay time region 1": 1.6958081603507122}, "outcomes": {"deceased population region 1": 181.77408, "max infected fraction R1": 8.900666e-06}}, {"key": "61", "experiment": {"additional seasonal immune population fraction R1": 0.1645366403285766, "fatality ratio region 1": 0.0939751459172865, "infection ratio region 1": 0.0715462297993841, "initial immune fraction of the population of region 1": 0.0211066833390181, "normal contact rate region 1": 70.54036044705136, "permanent immune population fraction R1": 0.2760750321382811, "recovery time region 1": 0.5527901122638686, "root contact rate region 1": 3.699350151461145, "susceptible to immune population delay time region 1": 1.6184573071316126}, "outcomes": {"deceased population region 1": 16581255.0, "max infected fraction R1": 0.018822614}}, {"key": "62", "experiment": {"additional seasonal immune population fraction R1": 0.4202017712090785, "fatality ratio region 1": 0.095865886619533, "infection ratio region 1": 0.1301304914353748, "initial immune fraction of the population of region 1": 0.092391431503827, "normal contact rate region 1": 19.617834324683585, "permanent immune population fraction R1": 0.4665752058188097, "recovery time region 1": 0.7163022449812112, "root contact rate region 1": 1.863668295310262, "susceptible to immune population delay time region 1": 1.563200967652121}, "outcomes": {"deceased population region 1": 115825.086, "max infected fraction R1": 0.0005223839}}, {"key": "63", "experiment": {"additional seasonal immune population fraction R1": 0.3696959246796878, "fatality ratio region 1": 0.0770561602250903, "infection ratio region 1": 0.1338803444339512, "initial immune fraction of the population of region 1": 0.1456113743468339, "normal contact rate region 1": 59.39778161352662, "permanent immune population fraction R1": 0.1623069449257496, "recovery time region 1": 0.6002832019147473, "root contact rate region 1": 0.4929887469443977, "susceptible to immune population delay time region 1": 0.6399203235947414}, "outcomes": {"deceased population region 1": 32839910.0, "max infected fraction R1": 0.10183825}}, {"key": "64", "experiment": {"additional seasonal immune population fraction R1": 0.3200489702151741, "fatality ratio region 1": 0.0702902702056794, "infection ratio region 1": 0.0994144395874426, "initial immune fraction of the population of region 1": 0.3948218269235574, "normal contact rate region 1": 64.05084364309995, "permanent immune population fraction R1": 0.2153936090444378, "recovery time region 1": 0.3344230630584032, "root contact rate region 1": 2.239863202509236, "susceptible to immune population delay time region 1": 1.1126819633823433}, "outcomes": {"deceased population region 1": 12549204.0, "max infected fraction R1": 0.023432584}}, {"key": "65", "experiment": {"additional seasonal immune population fraction R1": 0.0714963058816132, "fatality ratio region 1": 0.0867313529660354, "infection ratio region 1": 0.1310516856539313, "initial immune fraction of the population of region 1": 0.1520662215094707, "normal contact rate region 1": 27.117228959946065, "permanent immune population fraction R1": 0.1651198334380744, "recovery time region 1": 0.6218909354952749, "root contact rate region 1": 3.44325914255348, "susceptible to immune population delay time region 1": 1.2094049161713962}, "outcomes": {"deceased population region 1": 18453822.0, "max infected fraction R1": 0.019938644}}, {"key": "66", "experiment": {"additional seasonal immune population fraction R1": 0.2214021357265494, "fatality ratio region 1": 0.0186938383277522, "infection ratio region 1": 0.1450622814177762, "initial immune fraction of the population of region 1": 0.3608600800043469, "normal contact rate region 1": 96.7295902585888, "permanent immune population fraction R1": 0.0665002914664917, "recovery time region 1": 0.2065145428963416, "root contact rate region 1": 0.6989596995187556, "susceptible to immune population delay time region 1": 1.8777277439461424}, "outcomes": {"deceased population region 1": 7442572.5, "max infected fraction R1": 0.15262252}}, {"key": "67", "experiment": {"additional seasonal immune population fraction R1": 0.234657434429412, "fatality ratio region 1": 0.0115138454846496, "infection ratio region 1": 0.0270015456070857, "initial immune fraction of the population of region 1": 0.1287179236860179, "normal contact rate region 1": 85.95808405513733, "permanent immune population fraction R1": 0.4779499212559419, "recovery time region 1": 0.7375465065456458, "root contact rate region 1": 2.639929803290585, "susceptible to immune population delay time region 1": 1.7630574558972807}, "outcomes": {"deceased population region 1": 6997.8765, "max infected fraction R1": 0.00020495235}}, {"key": "68", "experiment": {"additional seasonal immune population fraction R1": 0.4360536315896412, "fatality ratio region 1": 0.0809305358774258, "infection ratio region 1": 0.0819312739988386, "initial immune fraction of the population of region 1": 0.2774448281150743, "normal contact rate region 1": 34.35544755401004, "permanent immune population fraction R1": 0.32402143087763, "recovery time region 1": 0.1283026939260275, "root contact rate region 1": 1.982677756942247, "susceptible to immune population delay time region 1": 0.7584116663819456}, "outcomes": {"deceased population region 1": 53237.93, "max infected fraction R1": 7.8914745e-05}}, {"key": "69", "experiment": {"additional seasonal immune population fraction R1": 0.4615928367805114, "fatality ratio region 1": 0.0510607955409777, "infection ratio region 1": 0.0402232303805838, "initial immune fraction of the population of region 1": 0.2549394920016836, "normal contact rate region 1": 22.130563167973985, "permanent immune population fraction R1": 0.0992142530253973, "recovery time region 1": 0.2374748032963962, "root contact rate region 1": 4.239935068357014, "susceptible to immune population delay time region 1": 1.8611557254290176}, "outcomes": {"deceased population region 1": 31855.555, "max infected fraction R1": 0.00013169248}}, {"key": "70", "experiment": {"additional seasonal immune population fraction R1": 0.1836963450299374, "fatality ratio region 1": 0.0541470005296685, "infection ratio region 1": 0.0789534906235936, "initial immune fraction of the population of region 1": 0.4038711934487405, "normal contact rate region 1": 94.21326259442492, "permanent immune population fraction R1": 0.2952416805752959, "recovery time region 1": 0.5271570287518841, "root contact rate region 1": 2.957841055063254, "susceptible to immune population delay time region 1": 0.8443002155997689}, "outcomes": {"deceased population region 1": 15291271.0, "max infected fraction R1": 0.039770022}}, {"key": "71", "experiment": {"additional seasonal immune population fraction R1": 0.0751719379939353, "fatality ratio region 1": 0.041756771779617, "infection ratio region 1": 0.1030623147315634, "initial immune fraction of the population of region 1": 0.4592936948101446, "normal contact rate region 1": 85.10254467296875, "permanent immune population fraction R1": 0.0481055671709187, "recovery time region 1": 0.2000997395009222, "root contact rate region 1": 4.411906004157176, "susceptible to immune population delay time region 1": 1.283271841806689}, "outcomes": {"deceased population region 1": 6856010.0, "max infected fraction R1": 0.006386965}}, {"key": "72", "experiment": {"additional seasonal immune population fraction R1": 0.1069324072879256, "fatality ratio region 1": 0.0876396282850942, "infection ratio region 1": 0.0348391633460702, "initial immune fraction of the population of region 1": 0.2381985477184779, "normal contact rate region 1": 10.40045117627437, "permanent immune population fraction R1": 0.1204899756709475, "recovery time region 1": 0.2718624185951466, "root contact rate region 1": 2.453455763994008, "susceptible to immune population delay time region 1": 1.606343253791409}, "outcomes": {"deceased population region 1": 64394.13, "max infected fraction R1": 0.00016959691}}, {"key": "73", "experiment": {"additional seasonal immune population fraction R1": 0.1488072514858592, "fatality ratio region 1": 0.0131879297504553, "infection ratio region 1": 0.1468597081689613, "initial immune fraction of the population of region 1": 0.12358429530495, "normal contact rate region 1": 83.21982363706961, "permanent immune population fraction R1": 0.0091995404082367, "recovery time region 1": 0.287291457803048, "root contact rate region 1": 3.095390919960116, "susceptible to immune population delay time region 1": 0.9462955254661828}, "outcomes": {"deceased population region 1": 5244491.5, "max infected fraction R1": 0.10886279}}, {"key": "74", "experiment": {"additional seasonal immune population fraction R1": 0.1531732781981724, "fatality ratio region 1": 0.0669110536577229, "infection ratio region 1": 0.0527038964996175, "initial immune fraction of the population of region 1": 0.4835389540234783, "normal contact rate region 1": 81.88880446588924, "permanent immune population fraction R1": 0.0921816539968318, "recovery time region 1": 0.4451498665768859, "root contact rate region 1": 1.1750612745051774, "susceptible to immune population delay time region 1": 0.7124531645133578}, "outcomes": {"deceased population region 1": 22140746.0, "max infected fraction R1": 0.049456757}}, {"key": "75", "experiment": {"additional seasonal immune population fraction R1": 0.1797554764000242, "fatality ratio region 1": 0.0271578044320374, "infection ratio region 1": 0.0612550686060487, "initial immune fraction of the population of region 1": 0.3535638237446873, "normal contact rate region 1": 56.45462592168656, "permanent immune population fraction R1": 0.3480191506413, "recovery time region 1": 0.3122068781880572, "root contact rate region 1": 2.1777355634641413, "susceptible to immune population delay time region 1": 0.5436786852772701}, "outcomes": {"deceased population region 1": 41057.844, "max infected fraction R1": 0.0003336591}}, {"key": "76", "experiment": {"additional seasonal immune population fraction R1": 0.2608809067239134, "fatality ratio region 1": 0.0629762774519282, "infection ratio region 1": 0.0551213202541565, "initial immune fraction of the population of region 1": 0.1118999731620969, "normal contact rate region 1": 43.28975557464324, "permanent immune population fraction R1": 0.3433326027221149, "recovery time region 1": 0.1737348285136379, "root contact rate region 1": 2.5064373486298703, "susceptible to immune population delay time region 1": 1.038806738632128}, "outcomes": {"deceased population region 1": 45541.617, "max infected fraction R1": 0.00011310416}}, {"key": "77", "experiment": {"additional seasonal immune population fraction R1": 0.0239890986670665, "fatality ratio region 1": 0.0292272519497846, "infection ratio region 1": 0.1170901658431001, "initial immune fraction of the population of region 1": 0.2605311100781876, "normal contact rate region 1": 31.366674427037136, "permanent immune population fraction R1": 0.2042400279730221, "recovery time region 1": 0.7291714288087929, "root contact rate region 1": 4.679269207430792, "susceptible to immune population delay time region 1": 0.5155466481586453}, "outcomes": {"deceased population region 1": 6093550.5, "max infected fraction R1": 0.019766135}}, {"key": "78", "experiment": {"additional seasonal immune population fraction R1": 0.0634303995968144, "fatality ratio region 1": 0.0432816530957231, "infection ratio region 1": 0.1325479146039749, "initial immune fraction of the population of region 1": 0.336589791150216, "normal contact rate region 1": 61.88518829362881, "permanent immune population fraction R1": 0.0886755410344273, "recovery time region 1": 0.186588358375741, "root contact rate region 1": 2.2774435173647896, "susceptible to immune population delay time region 1": 1.941874758724748}, "outcomes": {"deceased population region 1": 7053734.5, "max infected fraction R1": 0.0111309625}}, {"key": "79", "experiment": {"additional seasonal immune population fraction R1": 0.3785812247711297, "fatality ratio region 1": 0.0170098517431965, "infection ratio region 1": 0.113231634134048, "initial immune fraction of the population of region 1": 0.4332878647925786, "normal contact rate region 1": 74.08064184114225, "permanent immune population fraction R1": 0.1458082071544377, "recovery time region 1": 0.6925059738373157, "root contact rate region 1": 4.854383478994879, "susceptible to immune population delay time region 1": 0.9294170541987684}, "outcomes": {"deceased population region 1": 6170878.0, "max infected fraction R1": 0.057697445}}, {"key": "80", "experiment": {"additional seasonal immune population fraction R1": 0.2022182489842014, "fatality ratio region 1": 0.0359734495498929, "infection ratio region 1": 0.0692772217923258, "initial immune fraction of the population of region 1": 0.0780512710513012, "normal contact rate region 1": 28.078810428704085, "permanent immune population fraction R1": 0.4104710596717402, "recovery time region 1": 0.1808371703443434, "root contact rate region 1": 0.39886516908191, "susceptible to immune population delay time region 1": 0.7898134081838727}, "outcomes": {"deceased population region 1": 29496.709, "max infected fraction R1": 0.00013231747}}, {"key": "81", "experiment": {"additional seasonal immune population fraction R1": 0.0973074397271912, "fatality ratio region 1": 0.0742684583287955, "infection ratio region 1": 0.1019886724635246, "initial immune fraction of the population of region 1": 0.3250100004338558, "normal contact rate region 1": 90.40712745675634, "permanent immune population fraction R1": 0.382673395001733, "recovery time region 1": 0.690123788294065, "root contact rate region 1": 0.2574535384720569, "susceptible to immune population delay time region 1": 1.5056614187002324}, "outcomes": {"deceased population region 1": 23510006.0, "max infected fraction R1": 0.19353601}}, {"key": "82", "experiment": {"additional seasonal immune population fraction R1": 0.43461275230527, "fatality ratio region 1": 0.0331659860233351, "infection ratio region 1": 0.0435787016795963, "initial immune fraction of the population of region 1": 0.0728541828456603, "normal contact rate region 1": 47.34877582728337, "permanent immune population fraction R1": 0.4017390507372477, "recovery time region 1": 0.1106907527055544, "root contact rate region 1": 1.2154956434256363, "susceptible to immune population delay time region 1": 1.3147756315370474}, "outcomes": {"deceased population region 1": 9857.003, "max infected fraction R1": 3.2244086e-05}}, {"key": "83", "experiment": {"additional seasonal immune population fraction R1": 0.3719604345075061, "fatality ratio region 1": 0.0799167648804902, "infection ratio region 1": 0.1123492255146302, "initial immune fraction of the population of region 1": 0.2803604249854697, "normal contact rate region 1": 76.83565342312245, "permanent immune population fraction R1": 0.1326727811019465, "recovery time region 1": 0.5829187716002658, "root contact rate region 1": 0.966565726835118, "susceptible to immune population delay time region 1": 1.4119343203995116}, "outcomes": {"deceased population region 1": 32824764.0, "max infected fraction R1": 0.150568}}, {"key": "84", "experiment": {"additional seasonal immune population fraction R1": 0.3361969347714395, "fatality ratio region 1": 0.0429593467188274, "infection ratio region 1": 0.1358734677323084, "initial immune fraction of the population of region 1": 0.4655601324475903, "normal contact rate region 1": 75.10388494654062, "permanent immune population fraction R1": 0.3356507609407685, "recovery time region 1": 0.5756529867157119, "root contact rate region 1": 1.790322855034659, "susceptible to immune population delay time region 1": 1.4905666415247023}, "outcomes": {"deceased population region 1": 13239665.0, "max infected fraction R1": 0.05002321}}, {"key": "85", "experiment": {"additional seasonal immune population fraction R1": 0.4572621989065537, "fatality ratio region 1": 0.058006252557065, "infection ratio region 1": 0.0865659433129625, "initial immune fraction of the population of region 1": 0.0656759131817591, "normal contact rate region 1": 57.10056709556629, "permanent immune population fraction R1": 0.2486566724907004, "recovery time region 1": 0.4574535058621924, "root contact rate region 1": 4.300192252181176, "susceptible to immune population delay time region 1": 1.3653811965674103}, "outcomes": {"deceased population region 1": 1141019.8, "max infected fraction R1": 0.0016683368}}, {"key": "86", "experiment": {"additional seasonal immune population fraction R1": 0.3013983386437777, "fatality ratio region 1": 0.0171901220074731, "infection ratio region 1": 0.1039877383233924, "initial immune fraction of the population of region 1": 9.36459681352908e-05, "normal contact rate region 1": 24.666872231690316, "permanent immune population fraction R1": 0.1443761510260772, "recovery time region 1": 0.1945517616855545, "root contact rate region 1": 4.912641154959736, "susceptible to immune population delay time region 1": 1.9206467584951248}, "outcomes": {"deceased population region 1": 38867.668, "max infected fraction R1": 0.00038805624}}, {"key": "87", "experiment": {"additional seasonal immune population fraction R1": 0.333947262747233, "fatality ratio region 1": 0.0920536781823763, "infection ratio region 1": 0.0459004010309442, "initial immune fraction of the population of region 1": 0.4073564807504602, "normal contact rate region 1": 60.84424583100315, "permanent immune population fraction R1": 0.2801273664474353, "recovery time region 1": 0.4126101594595874, "root contact rate region 1": 0.0789182959459684, "susceptible to immune population delay time region 1": 1.90767311801127}, "outcomes": {"deceased population region 1": 105914.695, "max infected fraction R1": 0.00031494055}}, {"key": "88", "experiment": {"additional seasonal immune population fraction R1": 0.2719918862861698, "fatality ratio region 1": 0.0383176164549125, "infection ratio region 1": 0.1258416661585112, "initial immune fraction of the population of region 1": 0.1676405744385955, "normal contact rate region 1": 20.79403807505129, "permanent immune population fraction R1": 0.1922750805417461, "recovery time region 1": 0.6348625997663094, "root contact rate region 1": 3.210990861926631, "susceptible to immune population delay time region 1": 1.3390641839125454}, "outcomes": {"deceased population region 1": 1088617.9, "max infected fraction R1": 0.0019654513}}, {"key": "89", "experiment": {"additional seasonal immune population fraction R1": 0.3888288725612986, "fatality ratio region 1": 0.0971766197838841, "infection ratio region 1": 0.0562091366211985, "initial immune fraction of the population of region 1": 0.4186703586815081, "normal contact rate region 1": 79.21863374404485, "permanent immune population fraction R1": 0.4635684434263036, "recovery time region 1": 0.220542697892603, "root contact rate region 1": 3.034035398298818, "susceptible to immune population delay time region 1": 0.8121086699147866}, "outcomes": {"deceased population region 1": 32634.066, "max infected fraction R1": 6.643852e-05}}, {"key": "90", "experiment": {"additional seasonal immune population fraction R1": 0.228083105087834, "fatality ratio region 1": 0.0052927296096844, "infection ratio region 1": 0.0085729680369225, "initial immune fraction of the population of region 1": 0.3478412339699656, "normal contact rate region 1": 78.18892614850387, "permanent immune population fraction R1": 0.2137737972994907, "recovery time region 1": 0.341011937161743, "root contact rate region 1": 1.9253342916247744, "susceptible to immune population delay time region 1": 1.8222970474178075}, "outcomes": {"deceased population region 1": 796.93353, "max infected fraction R1": 4.193886e-05}}, {"key": "91", "experiment": {"additional seasonal immune population fraction R1": 0.4839650771768808, "fatality ratio region 1": 0.0856375014387181, "infection ratio region 1": 0.1430114044027525, "initial immune fraction of the population of region 1": 0.0183475675648848, "normal contact rate region 1": 37.70208212807548, "permanent immune population fraction R1": 0.3267401716761263, "recovery time region 1": 0.1371970393232543, "root contact rate region 1": 2.08484912777778, "susceptible to immune population delay time region 1": 1.5217371394470052}, "outcomes": {"deceased population region 1": 123192.66, "max infected fraction R1": 0.00019215707}}, {"key": "92", "experiment": {"additional seasonal immune population fraction R1": 0.1351868240986123, "fatality ratio region 1": 0.0966187851768214, "infection ratio region 1": 0.0669322370268466, "initial immune fraction of the population of region 1": 0.3810539309672591, "normal contact rate region 1": 70.08951077606866, "permanent immune population fraction R1": 0.1956527456056427, "recovery time region 1": 0.7036680833120608, "root contact rate region 1": 4.542367228834198, "susceptible to immune population delay time region 1": 0.9959302617094034}, "outcomes": {"deceased population region 1": 24701702.0, "max infected fraction R1": 0.035116095}}, {"key": "93", "experiment": {"additional seasonal immune population fraction R1": 0.0693157246783253, "fatality ratio region 1": 0.0564323595452133, "infection ratio region 1": 0.0340439983838779, "initial immune fraction of the population of region 1": 0.1081718386010411, "normal contact rate region 1": 67.62508990080917, "permanent immune population fraction R1": 0.2687721977262483, "recovery time region 1": 0.5384347011321307, "root contact rate region 1": 2.8230907597038986, "susceptible to immune population delay time region 1": 0.9168261787131564}, "outcomes": {"deceased population region 1": 155718.75, "max infected fraction R1": 0.000514911}}, {"key": "94", "experiment": {"additional seasonal immune population fraction R1": 0.0536949976996433, "fatality ratio region 1": 0.0823234813195585, "infection ratio region 1": 0.123331634051511, "initial immune fraction of the population of region 1": 0.374956771906215, "normal contact rate region 1": 96.33046104064944, "permanent immune population fraction R1": 0.1177960097707046, "recovery time region 1": 0.5032052729585815, "root contact rate region 1": 1.0641305370135263, "susceptible to immune population delay time region 1": 1.9347073617595532}, "outcomes": {"deceased population region 1": 40225852.0, "max infected fraction R1": 0.31572878}}, {"key": "95", "experiment": {"additional seasonal immune population fraction R1": 0.4726135337536642, "fatality ratio region 1": 0.0086799747801472, "infection ratio region 1": 0.0178042321802693, "initial immune fraction of the population of region 1": 0.130170884442539, "normal contact rate region 1": 25.624623942214647, "permanent immune population fraction R1": 0.0780285397945942, "recovery time region 1": 0.4983351400741203, "root contact rate region 1": 3.837046963117877, "susceptible to immune population delay time region 1": 0.8153199238943027}, "outcomes": {"deceased population region 1": 2165.5066, "max infected fraction R1": 9.3079616e-05}}, {"key": "96", "experiment": {"additional seasonal immune population fraction R1": 0.4523585398297742, "fatality ratio region 1": 0.0346216867579537, "infection ratio region 1": 0.0908051809490392, "initial immune fraction of the population of region 1": 0.0978388087130577, "normal contact rate region 1": 98.93675217341868, "permanent immune population fraction R1": 0.3619562974709748, "recovery time region 1": 0.1623796370644836, "root contact rate region 1": 1.4724510475190484, "susceptible to immune population delay time region 1": 1.7055603877662926}, "outcomes": {"deceased population region 1": 45449.824, "max infected fraction R1": 0.000203139}}, {"key": "97", "experiment": {"additional seasonal immune population fraction R1": 0.2448431031947215, "fatality ratio region 1": 0.0258698969386791, "infection ratio region 1": 0.0269436064426165, "initial immune fraction of the population of region 1": 0.4262489676695333, "normal contact rate region 1": 18.587253751651463, "permanent immune population fraction R1": 0.4223687367296171, "recovery time region 1": 0.2924315360674554, "root contact rate region 1": 3.255185801267238, "susceptible to immune population delay time region 1": 1.059613420734712}, "outcomes": {"deceased population region 1": 6746.1777, "max infected fraction R1": 6.52288e-05}}, {"key": "98", "experiment": {"additional seasonal immune population fraction R1": 0.4086856987671188, "fatality ratio region 1": 0.0678644218412246, "infection ratio region 1": 0.1199564434515167, "initial immune fraction of the population of region 1": 0.4981670518344111, "normal contact rate region 1": 15.142834287235154, "permanent immune population fraction R1": 0.3988610113374465, "recovery time region 1": 0.4119088171173192, "root contact rate region 1": 2.134910794665682, "susceptible to immune population delay time region 1": 0.5032427122437965}, "outcomes": {"deceased population region 1": 54552.62, "max infected fraction R1": 0.0002535675}}, {"key": "99", "experiment": {"additional seasonal immune population fraction R1": 0.4431195307376998, "fatality ratio region 1": 0.0660182097443413, "infection ratio region 1": 0.0938324005650998, "initial immune fraction of the population of region 1": 0.1704503241445359, "normal contact rate region 1": 93.22471013123992, "permanent immune population fraction R1": 0.3305296550043505, "recovery time region 1": 0.4382544391198398, "root contact rate region 1": 4.950215742381479, "susceptible to immune population delay time region 1": 0.8571633747856312}, "outcomes": {"deceased population region 1": 7865418.0, "max infected fraction R1": 0.023906773}}]

const checkboxRow = document.getElementById("row3");
console.log(checkboxRow)
buildSelectionRow();

Set.prototype.intersection = function(setB) {
    var intersection = new Set();
    for (var elem of setB) {
        if (this.has(elem)) {
            intersection.add(elem);
        }
    }
    return intersection;
};

Set.prototype.difference = function(setB) {
    var difference = new Set(this);
    for (var elem of setB) {
        difference.delete(elem);
    }
    return difference;
};

Set.prototype.difference = function(setB) {
    var difference = new Set(this);
    for (var elem of setB) {
        difference.delete(elem);
    }
    return difference;
};

Set.prototype.addEach = function(collection) {
    for (let element of collection){
        this.add(element)
    }
};

processData(data)

function processData(data) {
    // http://stackoverflow.com/questions/16265123/resize-svg-when-window-is-resized-in-d3-js
    // http://blog.webkid.io/responsive-chart-usability-d3/
    console.log(data)
    const uncertainties = Object.keys(data[0].experiment);
    const outcomes = Object.keys(data[0].outcomes);

    const dimensions = {};
    const checkedDimensions = {};
    for (i=0; i<uncertainties.length; i++){
        dimensions[uncertainties[i]] = {title: uncertainties[i], type:"number"};
        checkedDimensions[uncertainties[i]] = {title: uncertainties[i], type:"number"};
    }

    // TODO:: I create the key four times, this is silly
    const experiments = data.map(function(d){
        const experiment = d.experiment;
        experiment.key = "exp"+d.key;
        return experiment});

    allKeys = new Set(data.map(function(d){return "exp"+d.key}));
    parcoord_brushed.addEach(allKeys);

    pc0 = d3.parcoords()("#example")
        .data(experiments)
        .composite("darken")
        .margin({ top: 60, left: 0, bottom: 60, right: 0 })
        .dimensions(checkedDimensions)
        .shadows()
        .mode("queue")
        .rotateLabels(enabled=true)
        .render()
        .brushMode("1D-axes");

    pc0.alphaOnBrushed(1);
    pc0.ticks(2)

    const axes = pc0.svg.selectAll(".axis")[0];
    const textlabels = pc0.svg.selectAll('.resize')
        .append("text")
        .attr("dy", function(n, i){
            if (n=='s'){
                return "+15";
            }
            if (n=='n'){
                return "-5";
            }});

    pc0.on("brush", function(d){
        //lower label TODO:: nog wel naar beneden verplaatsen
        let lower, upper, index, label, brushes, brush;
        brushes = pc0.brushExtents();

        textlabels
            .text(function(n,i){
                // n is upper (s) or lower (n)
                // i is index of axis

                index = Math.floor(i/2);
                label = axes[index].__data__;

                brush = brushes[label];
                if(brush){
                    if (n=='s'){
                        return brush[0].toFixed(2);
                    }
                    if (n=='n'){
                        return brush[1].toFixed(2);
                    }
                }
            })
            .attr("text-anchor", "middle");

        parcoord_brushed.clear();
        parcoord_brushed.addEach(new Set(d.map(function(d){return d.key;})));
        redraw();
    });

    // TODO:; perhaps have an object for each figure instead of index based
    // TODO:: alignment in arrays
    let outcomeData;
    let selectionSet;
    let fig;
    for (let outcome of outcomes){
        outcomeData = data.map(function(d){
            return {key: "exp"+d.key, values:d.outcomes[outcome]}
        });

        selectionSet = new Set();
        selectionSet.addEach(allKeys);

        fig = drawBeeswarm(outcomeData, outcome, selectionSet);
        figs.push(fig);
        figs_brushed.push(selectionSet);
    }

    populateCheckBoxes(uncertainties, dimensions, checkedDimensions);
}

function populateCheckBoxes(uncertainties, dimensions, checkedDimensions){
    const input = document.getElementById("input");
    for (let unc of uncertainties) {
        let div = document.createElement('div');
        let label= document.createElement("label");
        let checkbox = document.createElement('input');

        div.className = "form-check";
        label.className = "form-check-input";

        checkbox.type = "checkbox";
        checkbox.name = unc;
        checkbox.value = true;
        checkbox.checked = true;
        checkbox.onchange = function(){
            this.checked;
            if (this.checked){
                checkedDimensions[this.name] = dimensions[this.name]
            } else {
                delete checkedDimensions[this.name]
            }
            pc0.dimensions(checkedDimensions)
                .render().updateAxes();
        };

        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(unc));

        input.appendChild(label);
        input.appendChild(document.createElement("br"));
    }

    return input
}

function drawBeeswarm(data, outcomeName, selectionSet){
    let textlabels; //for labels of brush
    
    console.log(outcomeName);
    console.log(data); 

    // create a new row
    // the actual modifications of the dom
    const row = d3.select(".container").append("div")
        .attr("class", "row");
    const column1 = row.append("div").attr("class", "col-lg-2 col-xl-2");
    const column2 = row.append("div").attr("class", "col-lg-8 col-xl-8");
    const column3 = row.append("div").attr("class", "col-lg-2 col-xl-2");

    const margin = {top: 20, right: 20, bottom: 40, left: 50};
    const columnWidth = column2[0][0].offsetWidth; // from style sheet
    const rowHeight = 300 + margin.top + margin.bottom; // our choice

    const plotWidth = columnWidth - margin.left - margin.right;
    const plotHeight = rowHeight - margin.top - margin.bottom;

    // scales
    const y = d3.scale.linear()
        .range([plotHeight, 0])
        .domain([d3.min(data, function (d) {
                        return d.values}),
                 d3.max(data, function (d) {
                        return d.values})]);

    const yAxis = d3.svg.axis().scale(y)
        .orient("left").ticks(5);

    const swarm = d3.beeswarm()
        .data(data)
        .distributeOn(function(d){
            return y(d.values);
        })
        .orientation('vertical')
        .side('symetric');
    const beeswarmArrangement =	swarm.arrange();

    // append svg
    const svg = column2.append("svg")
        .attr("width", columnWidth)
        .attr("height", rowHeight)
        .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");

    const nodeContainer = svg.append("g")
        .attr("id", "node-container");

    const node = nodeContainer.selectAll("circle")
        .data(beeswarmArrangement)
        .enter()
            .append("circle")
                .attr('cx', function(bee) { return bee.x+plotWidth/2; })
                .attr('cy', function(bee) { return bee.y; })
                .attr('r', 4)
                .style('fill', "steelblue");

    // Add the Y Axis
    const svgYaxis = svg.append("g")
        .attr("class", "y axis")
        .attr("transform", "translate(" + plotWidth/3 + ",0)")
        .call(yAxis);

    // add a label to the y-axis
    svg.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 0.175*plotWidth)
        .attr("x",0 - (plotHeight / 2))
        .attr("dy", "1em")
        .style("text-anchor", "middle")
        .text(outcomeName);

    // add a brush option to the plot
    const brush = d3.svg.brush()
        .y(y)
        .on("brushstart", function() {
            if(d3.event.sourceEvent !== null) {
                d3.event.sourceEvent.stopPropagation();
            }
        })
        .on("brush", function() {
            const extent = brush.extent();
            selectionSet.clear();

            for (let i=0; i<data.length; i++){
                datum = data[i];
                if (datum.values >= extent[0] && datum.values <= extent[1]) {
                    selectionSet.add(datum.key);
                }
            }

            textlabels
                .text(function(n){
                    // n is upper (s) or lower (n)
                    if (n=='s'){
                        return extent[0].toFixed(2);
                    }
                    if (n=='n'){
                        return extent[1].toFixed(2);
                    }
                })
                .attr("text-anchor", "middle");
            redraw();
        })
        .on("brushend", function() {
            const extent = brush.extent();
            if(extent[0] == extent[1]){
                //checkboxRow.hide();
                selectionSet.clear();
                selectionSet.addEach(allKeys);
            }
            //else {
                //checkboxRow.show();
            //}

            redraw();
        });

    // Add and store a brush for each axis.
    const svgBrush = svgYaxis.append("g")
        .attr("class", "brush")
        .call(brush)
        .selectAll("rect")
        .style("visibility", null)
        .attr("x", -15)
        .attr("width", 30);

    textlabels = svgYaxis.selectAll('.resize')
        .append("text")
        .attr("dy", function(n, i){
            if (n=='s'){
                return "+15";
            }
            if (n=='n'){
                return "-5";
            }});


    return svg;
}

function redraw(){
    // make the four possible classes

    let ofInterest = new Set();
    ofInterest.addEach(allKeys);
    for (let selection of figs_brushed){
        ofInterest = ofInterest.intersection(selection);
    }

    const notOfInterest = allKeys.difference(ofInterest);
    const selected = parcoord_brushed;
    const notSelected = allKeys.difference(selected);

    const soi = selected.intersection(ofInterest);
    const nsoi = notSelected.intersection(ofInterest);
    const snoi = selected.intersection(notOfInterest);
    const nsnoi = notSelected.intersection(notOfInterest);

    for (let fig of figs){
        fig.selectAll("circle")
            .style("fill", function(d){
                let key = d.datum.key;
                if (soi.has(key)){
                    return "#4daf4a";
                } else if (nsoi.has(key)){
                    return "#377eb8";
                } else if (snoi.has(key)) {
                    return "#e41a1c";
                } else {
                    return "grey";
                }})
            .style("visibility", function(d){
                // console.log(document.getElementById("soi"));
                let key = d.datum.key;
                if (soi.has(key) && document.getElementById("soi").checked){
                    return "visible";
                } else if (nsoi.has(key) && document.getElementById("nsoi").checked){
                    return "visible";
                } else if (snoi.has(key) && document.getElementById("snoi").checked) {
                    return "visible";
                } else if (nsnoi.has(key) && document.getElementById("nsnoi").checked){
                    return "visible";
                } else{
                    return "hidden";
                }});
    }


    // hidden can be done using alpha
    pc0
        .color(function(d){
            let key = d.key;
            if (soi.has(key) && document.getElementById("soi").checked){
                return "#4daf4a";
            } else if (nsoi.has(key) && document.getElementById("nsoi").checked){
                return "#377eb8";
            } else if (snoi.has(key) && document.getElementById("snoi").checked) {
                return "#e41a1c";
            } else if (nsnoi.has(key) && document.getElementById("nsnoi").checked){
                return "LightGray";
            } else{
                return "#00000000";
            }})
        .render();

    let legendLabel, label, set;
    let sets = [soi, snoi, nsoi, nsnoi]
    for (let i=0; i<legendLabels.length; i++){
        legendLabel = legendLabels[i];
        label = labels[i]
        set = sets[i];
        legendLabel.nodeValue = label + " (" + set.size + ")"
    }

}

function buildSelectionRow(){
    const column = document.getElementById("row3checkboxes");
    const ids = ["soi", "snoi", "nsoi", "nsnoi"];
    const colors = ["#4daf4a",
                    "#e41a1c",
                    "#377eb8",
                    "grey"];

    let i, text, item, div, label, checkbox, id, color, textLabel;
    for (i=0; i<labels.length; i++){
        text = labels[i];
        id = ids[i];
        color = colors[i]

        div = document.createElement("div");
        div.className = "form-check form-check-inline";

        label = document.createElement("label");
        label.className = "form-check-label";

        checkbox = document.createElement('input');
        checkbox.className = "form-check-input";
        checkbox.type = "checkbox";
        checkbox.checked = true;
        checkbox.name = text;
        checkbox.id = id;
        checkbox.onchange = function(){
            redraw();
        };

        label.appendChild(checkbox);

        //TODO: use custom styling on checkbox instead
        //TODO: or move this functionality to svg legend as part of parcoords fig
        textLabel = document.createTextNode(text);
        label.style.color = color;
        label.appendChild(textLabel);
        legendLabels.push(textLabel);

        div.appendChild(label);
        column.appendChild(div);
    }

    //checkboxRow.hide();
}

</script>
</body>
</html>
